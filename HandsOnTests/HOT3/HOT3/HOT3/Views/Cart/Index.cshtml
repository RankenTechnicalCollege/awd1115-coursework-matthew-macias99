@model HOT3.ViewModels.CartVM

@if (TempData["Success"] is string msg)
{
	<div class="alert alert-sucess text-center">@msg</div>
}

<h2>Shopping Cart</h2>

@if (!Model.Items.Any())
{
	<p class="text-muted">Your cart is empty</p>
}
else
{
	<table class="table align-middle">
		<thead class="table-dark">
			<tr>
				<th>Item</th>
				<th>Price</th>
				<th>Qty</th>
				<th>Item Total</th>
				<th></th>
			</tr>
		</thead>
		<tbody>
			@foreach (var i in Model.Items)
			{
				<tr>
					<td>@i.Product.Name</td>
					<td>@i.Product.Price</td>
					<td>@i.Quantity</td>
					<td>@i.LineTotal</td>
					<td>
						<form asp-action="Remove" method="post">
							<input type="hidden" name="id" value="@i.Product.ProductId"/>
							<button class="btn btn-sm btn-outline-danger">Remove</button>
						</form>
					</td>
				</tr>
			}
		</tbody>
		<tfoot>
			<tr class="fw-bold">
				<td>Total</td>
				<td></td>
				<td>@Model.TotalQuantity</td>
				<td>@Model.TotalPrice</td>
				<td></td>
			</tr>
		</tfoot>
	</table>

	<form asp-action="purchase" method="post" class="text-end">
		<button class="btn btn-success">Purchase</button>
	</form>
}
