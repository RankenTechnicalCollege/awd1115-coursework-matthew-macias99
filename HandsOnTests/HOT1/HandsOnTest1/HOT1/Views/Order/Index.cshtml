@model HOT1.Models.OrderFormModel
@{
	ViewData["Title"] = "Order Form";
}

<div class="container my-5">
	<div class="row justify-content-center">
		<div class="col-md-6">
			<h1 class="mb-4">Crazy Crank's T-Shirt Factory</h1>

			<form asp-action="Index" method="post" novalidate>
				<div class="form-floating mb-3">
					<input asp-for="Quantity" class="form-control"/>
					<label asp-for="Quantity"></label>
					<span asp-validation-for="Quantity" class="text-danger"></span>
				</div>

				<div class="form-floating mb-3">
					<input asp-for="DiscountCode" class="form-control"/>
					<label asp-for="DiscountCode">Discount Code</label>
					@if (!string.IsNullOrEmpty(Model?.DiscountError))
					{
						<div class="text-danger mt-1">@Model.DiscountError</div>
					}
				</div>

				<button type="submit" class="btn btn-primary">Calculate</button>
			</form>

			@if (Model?.Quantity is not null && Model.Quantity > 0 && Model.Subtotal > 0)
			{
				<div class="card mt-4">
					<div class="card-body">
						<h5 class="card-title">Reciept</h5>
						<p class="mb-1">Unit Price: @Model.UnitPrice.ToString("C")</p>
						<p class="mb-1">Quantity: @Model.Quantity</p>
						<p class="mb-1"> Subtotal: <strong>@Model.Subtotal.ToString("C")</strong></p>
						<br />

						@if (Model.DiscountPercentage > 0)
						{
							<p class="mb-1">Discount: (@(Model.DiscountPercentage*100)%) : -@Model.DiscountAmount.ToString("C")</p>
						}
						else
						{
							<p class="mb-1">Discount: @Model.DiscountAmount.ToString("C")</p>
						}

						<p class="mb-1">Tax (8%): @Model.Tax.ToString("C")</p>
						<br/>
						<p class="mb-0 fs-5">Total: <strong>@Model.Total.ToString("C")</strong></p>
					</div>
				</div>
			}
		</div>
	</div>
</div>
