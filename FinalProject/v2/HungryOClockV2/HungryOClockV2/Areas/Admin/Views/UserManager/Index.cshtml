@model IEnumerable<HungryOClockV2.Models.ApplicationUser>

@{
	ViewBag.Title = "User Management";
	var adminIds = ViewBag.AdminIds as HashSet<string> ?? new HashSet<string>();
}

<h1>Manage Users</h1>

<table class="table table-striped">
	<thead>
		<tr>
			<th>Email</th>
			<th>Is Admin?</th>
			<th></th>
		</tr>
	</thead>
	<tbody>
		@foreach(var u in Model)
		{
			var isAdmin = adminIds.Contains(u.Id);
			<tr>
				<td>@u.Email</td>
				<td>@(isAdmin ? "Yes" : "No")</td>
				<td>
					<form asp-action="DeleteUser" method="post" class="d-inline">
						<input type="hidden" name="id" value="@u.Id" />
						<button type="submit" class="btn btn-danger">Delete User</button>
					</form>

					@if (!isAdmin)
					{
						<form asp-action="AddToAdmin" method="post" class="d-inline">
							<input type="hidden" name="id" value="@u.Id"/>
							<button type="submit" class="btn btn-secondary">Add To Admin Role</button>
						</form>
					}
					else
					{
						<form asp-action="RemoveFromAdmin" method="post" class="d-inline">
							<input type="hidden" name="id" value="@u.Id" />
							<button type="submit" class="btn btn-warning">Remove Admin Role</button>
						</form>
					}
				</td>
			</tr>
		}
	</tbody>
</table>
